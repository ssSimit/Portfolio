<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Project One</title>
  <link rel="stylesheet" href="../styles.css" />
</head>

<body>

  <!-- NAVBAR -->
  <header class="navbar">
    <div class="container">
      <h1 class="logo">Simit Rai</h1>
      <nav>
        <a href="../index.html#projects">← Back to Projects</a>
      </nav>
    </div>
  </header>

  <!-- PROJECT DETAIL -->
  <section class="project-detail">
    <div class="container">
      <div class="project-detail-wrapper">

        <!-- Main Content -->
        <div class="project-main">
          <h2>Blackjack With Friends</h2>

          <p class="project-intro">
            Blackjack With Friends is a casual blackjack game that supports both single-player and local multiplayer
            gameplay on the same device, allowing up to three players to play together in one session.
          </p>

          <!-- PLAYABLE GAME -->
          <div class="game-embed">
            <div class="game-play-overlay" id="playOverlay">
              <button id="playGameBtn" class="game-play-btn">
                <!-- <span class="play-icon">▶</span> -->
                <span>Run Game</span>
              </button>
            </div>
            <iframe id="gameIframe" title="Project One Playable Demo" loading="lazy" allowfullscreen
              allow="fullscreen; orientation-lock" style="display: none;"></iframe>
          </div>

          <p class="desktop-note">
            Playable WebGL demo. Click "Run Game" to start—best experience in landscape or fullscreen mode.
          </p>

          <!-- LONG DESCRIPTION -->
          <div class="project-description">

            <h3>About the Project</h3>
            <p>
              The game follows standard blackjack rules, including card values, bust conditions, and dealer behavior,
              while maintaining a clean and intuitive interface so players can focus on strategy rather than complexity.
              The local multiplayer system handles multiple hands, turn-based input, and score tracking within a single
              match, ensuring smooth gameplay even with multiple players.

              This project was built with a focus on clarity, rule accuracy, and scalable logic, making it easy to
              extend with new features such as betting systems, animations, or additional game modes in the future.
            </p>

            <h3>Tools & Technologies</h3>
            <ul>
              <li>Unity</li>
              <li>C# for gameplay logic</li>
              <li>Krita / Figma for art</li>
              <li>Custom WebGL template</li>
            </ul>

            <h3>What I Worked On</h3>
            <ul>
              <li>Applied object-oriented programming principles to model game systems such as cards, decks, players,
                and the dealer</li>
              <li>Built a turn-based system to support up to three local players on the same device</li>
              <li>Implemented single-player and multiplayer game modes within the same codebase</li>
              <li>Managed deck generation, shuffling, and card distribution logic</li>
              <li>UI and UX flow</li>


            </ul>

            <h3>What I Learned</h3>
            <ul>
              <li>Structuring game states for multi-hand card games</li>
              <li>Writing scalable and reusable game logic for rule-based systems</li>
              <li>Improving code organization for readability and future maintenance</li>
            </ul>

          </div>

        </div>
  </section>

  <script>
    const playGameBtn = document.getElementById('playGameBtn');
    const gameIframe = document.getElementById('gameIframe');
    const playOverlay = document.getElementById('playOverlay');
    const gameEmbedContainer = document.querySelector('.game-embed');

    async function enterFullscreen() {
      // Try container first
      if (gameEmbedContainer.requestFullscreen) {
        return gameEmbedContainer.requestFullscreen();
      }
      // Fallback to iframe if container not supported
      if (gameIframe.requestFullscreen) {
        return gameIframe.requestFullscreen();
      }
      // Vendor prefixes
      if (gameEmbedContainer.webkitRequestFullscreen) {
        return gameEmbedContainer.webkitRequestFullscreen();
      }
      if (gameEmbedContainer.mozRequestFullScreen) {
        return gameEmbedContainer.mozRequestFullScreen();
      }
      if (gameEmbedContainer.msRequestFullscreen) {
        return gameEmbedContainer.msRequestFullscreen();
      }
      throw new Error('Fullscreen API not supported');
    }

    playGameBtn.addEventListener('click', async () => {
      // Load the iframe
      gameIframe.src = './project1-game/';
      gameIframe.style.display = 'block';
      playOverlay.style.display = 'none';

      // Try to request fullscreen
      try {
        await enterFullscreen();
        if (screen.orientation && screen.orientation.lock) {
          try {
            await screen.orientation.lock('landscape');
          } catch (err) {
            console.log('Orientation lock not supported or failed');
          }
        }
      } catch (err) {
        console.log('Fullscreen request failed, continuing inline');
      }
    });

    // Handle fullscreen exit
    document.addEventListener('fullscreenchange', () => {
      if (!document.fullscreenElement) {
        // Fullscreen exited - stop and reset the game
        gameIframe.src = '';
        gameIframe.style.display = 'none';
        playOverlay.style.display = 'flex';
      }
    });

    // Webkit browsers
    document.addEventListener('webkitfullscreenchange', () => {
      if (!document.webkitFullscreenElement) {
        gameIframe.src = '';
        gameIframe.style.display = 'none';
        playOverlay.style.display = 'flex';
      }
    });

    // Mozilla browsers
    document.addEventListener('mozfullscreenchange', () => {
      if (!document.mozFullScreenElement) {
        gameIframe.src = '';
        gameIframe.style.display = 'none';
        playOverlay.style.display = 'flex';
      }
    });

    // MS browsers
    document.addEventListener('msfullscreenchange', () => {
      if (!document.msFullscreenElement) {
        gameIframe.src = '';
        gameIframe.style.display = 'none';
        playOverlay.style.display = 'flex';
      }
    });
  </script>


</body>

</html>